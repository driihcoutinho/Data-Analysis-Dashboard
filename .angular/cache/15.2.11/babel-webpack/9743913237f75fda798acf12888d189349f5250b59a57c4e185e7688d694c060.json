{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/adrie/Desktop/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { IonicModule, IonInfiniteScroll } from '@ionic/angular';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { HeaderComponent } from '../../components/header/header.component';\nimport { take } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/feed.service\";\nimport * as i2 from \"../../services/auth.service\";\nimport * as i3 from \"../../services/ui.service\";\nimport * as i4 from \"@ionic/angular\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"@angular/forms\";\nfunction FeedPage_ion_button_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-button\", 8);\n    i0.ɵɵlistener(\"click\", function FeedPage_ion_button_3_Template_ion_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r5 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r5.showCreatePost());\n    });\n    i0.ɵɵelement(1, \"ion-icon\", 9);\n    i0.ɵɵtext(2, \" Create Post \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction FeedPage_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 10)(1, \"ion-card\")(2, \"ion-card-content\")(3, \"ion-item\", 11)(4, \"ion-textarea\", 12);\n    i0.ɵɵlistener(\"ngModelChange\", function FeedPage_div_4_Template_ion_textarea_ngModelChange_4_listener($event) {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r7 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r7.newPostContent = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(5, \"div\", 13)(6, \"ion-button\", 14);\n    i0.ɵɵlistener(\"click\", function FeedPage_div_4_Template_ion_button_click_6_listener() {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r9 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r9.cancelPost());\n    });\n    i0.ɵɵtext(7, \"Cancel\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"ion-button\", 15);\n    i0.ɵɵlistener(\"click\", function FeedPage_div_4_Template_ion_button_click_8_listener() {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r10 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r10.createPost());\n    });\n    i0.ɵɵtext(9, \" Post \");\n    i0.ɵɵelementEnd()()()()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r1.newPostContent)(\"maxlength\", 400)(\"autoGrow\", true);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"disabled\", !ctx_r1.newPostContent || ctx_r1.newPostContent.length > 400);\n  }\n}\nfunction FeedPage_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 16);\n    i0.ɵɵelement(1, \"ion-spinner\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction FeedPage_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 17)(1, \"p\");\n    i0.ɵɵtext(2, \"No posts yet. Be the first to share something!\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction FeedPage_ion_card_7_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r13 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-card\", 18)(1, \"ion-card-content\")(2, \"div\", 19)(3, \"ion-text\", 20);\n    i0.ɵɵtext(4);\n    i0.ɵɵpipe(5, \"date\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(6, \"div\", 21);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"div\", 22)(9, \"ion-button\", 23);\n    i0.ɵɵlistener(\"click\", function FeedPage_ion_card_7_Template_ion_button_click_9_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r13);\n      const post_r11 = restoredCtx.$implicit;\n      const ctx_r12 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r12.onLike(post_r11, $event));\n    });\n    i0.ɵɵelement(10, \"ion-icon\", 24);\n    i0.ɵɵtext(11);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"ion-button\", 23);\n    i0.ɵɵlistener(\"click\", function FeedPage_ion_card_7_Template_ion_button_click_12_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r13);\n      const post_r11 = restoredCtx.$implicit;\n      const ctx_r14 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r14.onDislike(post_r11, $event));\n    });\n    i0.ɵɵelement(13, \"ion-icon\", 25);\n    i0.ɵɵtext(14);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"ion-button\", 26);\n    i0.ɵɵlistener(\"click\", function FeedPage_ion_card_7_Template_ion_button_click_15_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r13);\n      const post_r11 = restoredCtx.$implicit;\n      const ctx_r15 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r15.onReport(post_r11, $event));\n    });\n    i0.ɵɵelement(16, \"ion-icon\", 27);\n    i0.ɵɵtext(17, \" Report \");\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const post_r11 = ctx.$implicit;\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind2(5, 6, post_r11.createdAt == null ? null : post_r11.createdAt.toDate(), \"medium\"), \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", post_r11.content, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"color\", ctx_r4.hasUserLiked(post_r11) ? \"primary\" : \"medium\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", post_r11.likes || 0, \" \");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"color\", ctx_r4.hasUserDisliked(post_r11) ? \"primary\" : \"medium\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", post_r11.dislikes || 0, \" \");\n  }\n}\nexport class FeedPage {\n  constructor(feedService, authService, uiService) {\n    this.feedService = feedService;\n    this.authService = authService;\n    this.uiService = uiService;\n    this.posts = [];\n    this.currentUser = null;\n    this.newPostContent = '';\n    this.isCreatingPost = false;\n    this.isLoading = true;\n    this.pageSize = 10;\n  }\n  ngOnInit() {\n    this.loadInitialPosts();\n    this.userSubscription = this.authService.user$.subscribe(user => {\n      this.currentUser = user;\n    });\n  }\n  ngOnDestroy() {\n    if (this.postsSubscription) {\n      this.postsSubscription.unsubscribe();\n    }\n    if (this.userSubscription) {\n      this.userSubscription.unsubscribe();\n    }\n  }\n  loadInitialPosts() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      try {\n        _this.isLoading = true;\n        const posts = yield _this.feedService.getPosts(_this.pageSize).pipe(take(1)).toPromise();\n        _this.posts = posts || [];\n        if (_this.posts.length > 0) {\n          _this.lastPostId = _this.posts[_this.posts.length - 1].id;\n        }\n      } catch (error) {\n        yield _this.uiService.showError('Failed to load posts');\n      } finally {\n        _this.isLoading = false;\n      }\n    })();\n  }\n  loadMorePosts(event) {\n    var _this2 = this;\n    return _asyncToGenerator(function* () {\n      if (!_this2.lastPostId) {\n        event.target.complete();\n        event.target.disabled = true;\n        return;\n      }\n      try {\n        const newPosts = yield _this2.feedService.getPostsAfter(_this2.lastPostId, _this2.pageSize).pipe(take(1)).toPromise();\n        if (newPosts && newPosts.length > 0) {\n          _this2.posts = [..._this2.posts, ...newPosts];\n          _this2.lastPostId = newPosts[newPosts.length - 1].id;\n        } else {\n          event.target.disabled = true;\n        }\n      } catch (error) {\n        yield _this2.uiService.showError('Failed to load more posts');\n      } finally {\n        event.target.complete();\n      }\n    })();\n  }\n  showCreatePost() {\n    this.isCreatingPost = true;\n  }\n  createPost() {\n    var _this3 = this;\n    return _asyncToGenerator(function* () {\n      if (!_this3.newPostContent || _this3.newPostContent.length > 400) {\n        return;\n      }\n      try {\n        yield _this3.uiService.showLoading('Creating post...');\n        yield _this3.feedService.createPost(_this3.newPostContent);\n        _this3.newPostContent = '';\n        _this3.isCreatingPost = false;\n        yield _this3.uiService.showSuccess('Post created successfully');\n        yield _this3.loadInitialPosts();\n      } catch (error) {\n        yield _this3.uiService.showError('Failed to create post');\n      } finally {\n        yield _this3.uiService.hideLoading();\n      }\n    })();\n  }\n  onLike(post, event) {\n    var _this4 = this;\n    return _asyncToGenerator(function* () {\n      if (event) {\n        event.stopPropagation();\n      }\n      if (!post.id) return;\n      try {\n        yield _this4.feedService.likePost(post.id);\n      } catch (error) {\n        yield _this4.uiService.showError('Failed to like post');\n      }\n    })();\n  }\n  onDislike(post, event) {\n    var _this5 = this;\n    return _asyncToGenerator(function* () {\n      if (event) {\n        event.stopPropagation();\n      }\n      if (!post.id) return;\n      try {\n        yield _this5.feedService.dislikePost(post.id);\n      } catch (error) {\n        yield _this5.uiService.showError('Failed to dislike post');\n      }\n    })();\n  }\n  onReport(post, event) {\n    var _this6 = this;\n    return _asyncToGenerator(function* () {\n      if (event) {\n        event.stopPropagation();\n      }\n      if (!post.id) return;\n      const confirmed = yield _this6.uiService.showConfirm('Report Post', 'Are you sure you want to report this post?');\n      if (confirmed) {\n        try {\n          yield _this6.feedService.reportPost(post.id);\n          yield _this6.uiService.showSuccess('Post reported successfully');\n        } catch (error) {\n          yield _this6.uiService.showError('Failed to report post');\n        }\n      }\n    })();\n  }\n  cancelPost() {\n    this.newPostContent = '';\n    this.isCreatingPost = false;\n  }\n  hasUserLiked(post) {\n    return this.currentUser ? (post.userLikes || []).includes(this.currentUser.uid) : false;\n  }\n  hasUserDisliked(post) {\n    return this.currentUser ? (post.userDislikes || []).includes(this.currentUser.uid) : false;\n  }\n  static {\n    this.ɵfac = function FeedPage_Factory(t) {\n      return new (t || FeedPage)(i0.ɵɵdirectiveInject(i1.FeedService), i0.ɵɵdirectiveInject(i2.AuthService), i0.ɵɵdirectiveInject(i3.UiService));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: FeedPage,\n      selectors: [[\"app-feed\"]],\n      viewQuery: function FeedPage_Query(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵviewQuery(IonInfiniteScroll, 5);\n        }\n        if (rf & 2) {\n          let _t;\n          i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.infiniteScroll = _t.first);\n        }\n      },\n      standalone: true,\n      features: [i0.ɵɵStandaloneFeature],\n      decls: 10,\n      vars: 5,\n      consts: [[\"title\", \"Feed\"], [\"expand\", \"block\", \"class\", \"create-post-button\", 3, \"click\", 4, \"ngIf\"], [\"class\", \"create-post\", 4, \"ngIf\"], [\"class\", \"loading-container\", 4, \"ngIf\"], [\"class\", \"no-posts\", 4, \"ngIf\"], [\"class\", \"post-card\", 4, \"ngFor\", \"ngForOf\"], [3, \"ionInfinite\"], [\"loadingSpinner\", \"bubbles\", \"loadingText\", \"Loading more posts...\"], [\"expand\", \"block\", 1, \"create-post-button\", 3, \"click\"], [\"name\", \"create-outline\"], [1, \"create-post\"], [\"lines\", \"none\"], [\"placeholder\", \"What's on your mind?\", \"rows\", \"4\", 3, \"ngModel\", \"maxlength\", \"autoGrow\", \"ngModelChange\"], [1, \"button-group\"], [\"fill\", \"clear\", 3, \"click\"], [3, \"disabled\", \"click\"], [1, \"loading-container\"], [1, \"no-posts\"], [1, \"post-card\"], [1, \"post-metadata\"], [\"color\", \"medium\"], [1, \"post-content\"], [1, \"action-buttons\"], [\"fill\", \"clear\", 3, \"color\", \"click\"], [\"name\", \"thumbs-up-outline\"], [\"name\", \"thumbs-down-outline\"], [\"fill\", \"clear\", \"color\", \"medium\", 3, \"click\"], [\"name\", \"flag-outline\"]],\n      template: function FeedPage_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"ion-header\");\n          i0.ɵɵelement(1, \"app-header\", 0);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(2, \"ion-content\");\n          i0.ɵɵtemplate(3, FeedPage_ion_button_3_Template, 3, 0, \"ion-button\", 1);\n          i0.ɵɵtemplate(4, FeedPage_div_4_Template, 10, 4, \"div\", 2);\n          i0.ɵɵtemplate(5, FeedPage_div_5_Template, 2, 0, \"div\", 3);\n          i0.ɵɵtemplate(6, FeedPage_div_6_Template, 3, 0, \"div\", 4);\n          i0.ɵɵtemplate(7, FeedPage_ion_card_7_Template, 18, 9, \"ion-card\", 5);\n          i0.ɵɵelementStart(8, \"ion-infinite-scroll\", 6);\n          i0.ɵɵlistener(\"ionInfinite\", function FeedPage_Template_ion_infinite_scroll_ionInfinite_8_listener($event) {\n            return ctx.loadMorePosts($event);\n          });\n          i0.ɵɵelement(9, \"ion-infinite-scroll-content\", 7);\n          i0.ɵɵelementEnd()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"ngIf\", !ctx.isCreatingPost);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.isCreatingPost);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.isLoading);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", !ctx.isLoading && ctx.posts.length === 0);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngForOf\", ctx.posts);\n        }\n      },\n      dependencies: [IonicModule, i4.IonButton, i4.IonCard, i4.IonCardContent, i4.IonContent, i4.IonHeader, i4.IonIcon, i4.IonInfiniteScroll, i4.IonInfiniteScrollContent, i4.IonItem, i4.IonSpinner, i4.IonText, i4.IonTextarea, i4.TextValueAccessor, CommonModule, i5.NgForOf, i5.NgIf, i5.DatePipe, FormsModule, i6.NgControlStatus, i6.MaxLengthValidator, i6.NgModel, HeaderComponent],\n      styles: [\"ion-content[_ngcontent-%COMP%] {\\n  --background: var(--ion-background-color);\\n}\\n\\n.create-post-button[_ngcontent-%COMP%] {\\n  margin: 16px 0;\\n  height: 48px;\\n  --border-radius: 8px;\\n}\\n.create-post-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%] {\\n  margin-right: 8px;\\n  font-size: 20px;\\n}\\n\\n.create-post[_ngcontent-%COMP%] {\\n  margin-bottom: 16px;\\n  animation: _ngcontent-%COMP%_slideDown 0.3s ease-out;\\n}\\n.create-post[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%] {\\n  background: var(--ion-card-background);\\n  margin: 0;\\n  border-radius: 12px;\\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\\n}\\n.create-post[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%] {\\n  --background: transparent;\\n  --border-color: transparent;\\n  --padding-start: 0;\\n  --inner-padding-end: 0;\\n}\\n.create-post[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-textarea[_ngcontent-%COMP%] {\\n  --background: transparent;\\n  --color: var(--ion-text-color);\\n  --placeholder-color: var(--ion-color-medium);\\n  margin: 8px 0;\\n  min-height: 100px;\\n}\\n.create-post[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%] {\\n  display: flex;\\n  flex-direction: column;\\n  gap: 8px;\\n  margin-top: 16px;\\n}\\n.create-post[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%] {\\n  margin: 0;\\n}\\n\\n.post-card[_ngcontent-%COMP%] {\\n  background: var(--ion-card-background);\\n  border-radius: 12px;\\n  margin: 16px 0;\\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\\n  animation: _ngcontent-%COMP%_fadeIn 0.3s ease-out;\\n}\\n.post-card[_ngcontent-%COMP%]   .post-content[_ngcontent-%COMP%] {\\n  color: var(--ion-text-color);\\n  font-size: 1em;\\n  line-height: 1.5;\\n  margin: 0 0 16px 0;\\n  white-space: pre-wrap;\\n  word-break: break-word;\\n}\\n.post-card[_ngcontent-%COMP%]   .post-metadata[_ngcontent-%COMP%] {\\n  font-size: 0.9em;\\n  margin-bottom: 12px;\\n  color: var(--ion-color-medium);\\n}\\n.post-card[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%] {\\n  display: flex;\\n  justify-content: space-between;\\n  align-items: center;\\n  border-top: 1px solid rgba(var(--ion-color-medium-rgb), 0.2);\\n  padding-top: 12px;\\n  margin-top: 12px;\\n}\\n.post-card[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%] {\\n  margin: 0;\\n  --padding-start: 8px;\\n  --padding-end: 8px;\\n  height: 36px;\\n}\\n.post-card[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%] {\\n  font-size: 20px;\\n  margin-right: 4px;\\n}\\n.post-card[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   ion-button[color=tertiary][_ngcontent-%COMP%] {\\n  --color: var(--ion-color-tertiary);\\n}\\n.post-card[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   ion-button[color=primary][_ngcontent-%COMP%] {\\n  --color: var(--ion-color-primary);\\n}\\n\\n.loading-container[_ngcontent-%COMP%] {\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  min-height: 200px;\\n}\\n.loading-container[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%] {\\n  --color: var(--ion-color-primary);\\n  width: 48px;\\n  height: 48px;\\n}\\n\\n.no-posts[_ngcontent-%COMP%] {\\n  text-align: center;\\n  padding: 32px 16px;\\n  background: var(--ion-card-background);\\n  border-radius: 12px;\\n  margin: 16px 0;\\n  animation: _ngcontent-%COMP%_fadeIn 0.3s ease-out;\\n}\\n.no-posts[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\\n  font-size: 1em;\\n  line-height: 1.4;\\n  margin: 0;\\n  color: var(--ion-color-medium);\\n}\\n\\n@keyframes _ngcontent-%COMP%_fadeIn {\\n  from {\\n    opacity: 0;\\n    transform: translateY(20px);\\n  }\\n  to {\\n    opacity: 1;\\n    transform: translateY(0);\\n  }\\n}\\n@keyframes _ngcontent-%COMP%_slideDown {\\n  from {\\n    opacity: 0;\\n    transform: translateY(-20px);\\n  }\\n  to {\\n    opacity: 1;\\n    transform: translateY(0);\\n  }\\n}\\n@media (min-width: 768px) {\\n  .create-post[_ngcontent-%COMP%], .post-card[_ngcontent-%COMP%], .no-posts[_ngcontent-%COMP%] {\\n    max-width: 600px;\\n    margin-left: auto;\\n    margin-right: auto;\\n  }\\n  .button-group[_ngcontent-%COMP%] {\\n    flex-direction: row;\\n    justify-content: flex-end;\\n  }\\n  .button-group[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%] {\\n    width: auto;\\n  }\\n}\\n@media (prefers-color-scheme: dark) {\\n  .post-card[_ngcontent-%COMP%], .create-post[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%] {\\n    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\\n  }\\n  .action-buttons[_ngcontent-%COMP%] {\\n    border-top-color: rgba(var(--ion-color-medium-rgb), 0.1);\\n  }\\n}\\nion-infinite-scroll-content[_ngcontent-%COMP%] {\\n  min-height: 80px;\\n}\\nion-infinite-scroll-content[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%] {\\n  --color: var(--ion-color-primary);\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZlZWQucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UseUNBQUE7QUFDRjs7QUFFQTtFQUNFLGNBQUE7RUFDQSxZQUFBO0VBQ0Esb0JBQUE7QUFDRjtBQUNFO0VBQ0UsaUJBQUE7RUFDQSxlQUFBO0FBQ0o7O0FBR0E7RUFDRSxtQkFBQTtFQUNBLGtDQUFBO0FBQUY7QUFFRTtFQUNFLHNDQUFBO0VBQ0EsU0FBQTtFQUNBLG1CQUFBO0VBQ0Esd0NBQUE7QUFBSjtBQUVJO0VBQ0UseUJBQUE7RUFDQSwyQkFBQTtFQUNBLGtCQUFBO0VBQ0Esc0JBQUE7QUFBTjtBQUdJO0VBQ0UseUJBQUE7RUFDQSw4QkFBQTtFQUNBLDRDQUFBO0VBQ0EsYUFBQTtFQUNBLGlCQUFBO0FBRE47QUFLRTtFQUNFLGFBQUE7RUFDQSxzQkFBQTtFQUNBLFFBQUE7RUFDQSxnQkFBQTtBQUhKO0FBS0k7RUFDRSxTQUFBO0FBSE47O0FBUUE7RUFDRSxzQ0FBQTtFQUNBLG1CQUFBO0VBQ0EsY0FBQTtFQUNBLHdDQUFBO0VBQ0EsK0JBQUE7QUFMRjtBQU9FO0VBQ0UsNEJBQUE7RUFDQSxjQUFBO0VBQ0EsZ0JBQUE7RUFDQSxrQkFBQTtFQUNBLHFCQUFBO0VBQ0Esc0JBQUE7QUFMSjtBQVFFO0VBQ0UsZ0JBQUE7RUFDQSxtQkFBQTtFQUNBLDhCQUFBO0FBTko7QUFTRTtFQUNFLGFBQUE7RUFDQSw4QkFBQTtFQUNBLG1CQUFBO0VBQ0EsNERBQUE7RUFDQSxpQkFBQTtFQUNBLGdCQUFBO0FBUEo7QUFTSTtFQUNFLFNBQUE7RUFDQSxvQkFBQTtFQUNBLGtCQUFBO0VBQ0EsWUFBQTtBQVBOO0FBU007RUFDRSxlQUFBO0VBQ0EsaUJBQUE7QUFQUjtBQVVNO0VBQ0Usa0NBQUE7QUFSUjtBQVdNO0VBQ0UsaUNBQUE7QUFUUjs7QUFlQTtFQUNFLGFBQUE7RUFDQSx1QkFBQTtFQUNBLG1CQUFBO0VBQ0EsaUJBQUE7QUFaRjtBQWNFO0VBQ0UsaUNBQUE7RUFDQSxXQUFBO0VBQ0EsWUFBQTtBQVpKOztBQWdCQTtFQUNFLGtCQUFBO0VBQ0Esa0JBQUE7RUFDQSxzQ0FBQTtFQUNBLG1CQUFBO0VBQ0EsY0FBQTtFQUNBLCtCQUFBO0FBYkY7QUFlRTtFQUNFLGNBQUE7RUFDQSxnQkFBQTtFQUNBLFNBQUE7RUFDQSw4QkFBQTtBQWJKOztBQWtCQTtFQUNFO0lBQ0UsVUFBQTtJQUNBLDJCQUFBO0VBZkY7RUFpQkE7SUFDRSxVQUFBO0lBQ0Esd0JBQUE7RUFmRjtBQUNGO0FBa0JBO0VBQ0U7SUFDRSxVQUFBO0lBQ0EsNEJBQUE7RUFoQkY7RUFrQkE7SUFDRSxVQUFBO0lBQ0Esd0JBQUE7RUFoQkY7QUFDRjtBQW9CQTtFQUNFOzs7SUFHRSxnQkFBQTtJQUNBLGlCQUFBO0lBQ0Esa0JBQUE7RUFsQkY7RUFxQkE7SUFDRSxtQkFBQTtJQUNBLHlCQUFBO0VBbkJGO0VBcUJFO0lBQ0UsV0FBQTtFQW5CSjtBQUNGO0FBd0JBO0VBQ0U7O0lBRUUsd0NBQUE7RUF0QkY7RUF5QkE7SUFDRSx3REFBQTtFQXZCRjtBQUNGO0FBMkJBO0VBQ0UsZ0JBQUE7QUF6QkY7QUEyQkU7RUFDRSxpQ0FBQTtBQXpCSiIsImZpbGUiOiJmZWVkLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbImlvbi1jb250ZW50IHtcclxuICAtLWJhY2tncm91bmQ6IHZhcigtLWlvbi1iYWNrZ3JvdW5kLWNvbG9yKTtcclxufVxyXG5cclxuLmNyZWF0ZS1wb3N0LWJ1dHRvbiB7XHJcbiAgbWFyZ2luOiAxNnB4IDA7XHJcbiAgaGVpZ2h0OiA0OHB4O1xyXG4gIC0tYm9yZGVyLXJhZGl1czogOHB4O1xyXG4gIFxyXG4gIGlvbi1pY29uIHtcclxuICAgIG1hcmdpbi1yaWdodDogOHB4O1xyXG4gICAgZm9udC1zaXplOiAyMHB4O1xyXG4gIH1cclxufVxyXG5cclxuLmNyZWF0ZS1wb3N0IHtcclxuICBtYXJnaW4tYm90dG9tOiAxNnB4O1xyXG4gIGFuaW1hdGlvbjogc2xpZGVEb3duIDAuM3MgZWFzZS1vdXQ7XHJcblxyXG4gIGlvbi1jYXJkIHtcclxuICAgIGJhY2tncm91bmQ6IHZhcigtLWlvbi1jYXJkLWJhY2tncm91bmQpO1xyXG4gICAgbWFyZ2luOiAwO1xyXG4gICAgYm9yZGVyLXJhZGl1czogMTJweDtcclxuICAgIGJveC1zaGFkb3c6IDAgMnB4IDRweCByZ2JhKDAsIDAsIDAsIDAuMSk7XHJcblxyXG4gICAgaW9uLWl0ZW0ge1xyXG4gICAgICAtLWJhY2tncm91bmQ6IHRyYW5zcGFyZW50O1xyXG4gICAgICAtLWJvcmRlci1jb2xvcjogdHJhbnNwYXJlbnQ7XHJcbiAgICAgIC0tcGFkZGluZy1zdGFydDogMDtcclxuICAgICAgLS1pbm5lci1wYWRkaW5nLWVuZDogMDtcclxuICAgIH1cclxuXHJcbiAgICBpb24tdGV4dGFyZWEge1xyXG4gICAgICAtLWJhY2tncm91bmQ6IHRyYW5zcGFyZW50O1xyXG4gICAgICAtLWNvbG9yOiB2YXIoLS1pb24tdGV4dC1jb2xvcik7XHJcbiAgICAgIC0tcGxhY2Vob2xkZXItY29sb3I6IHZhcigtLWlvbi1jb2xvci1tZWRpdW0pO1xyXG4gICAgICBtYXJnaW46IDhweCAwO1xyXG4gICAgICBtaW4taGVpZ2h0OiAxMDBweDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC5idXR0b24tZ3JvdXAge1xyXG4gICAgZGlzcGxheTogZmxleDtcclxuICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XHJcbiAgICBnYXA6IDhweDtcclxuICAgIG1hcmdpbi10b3A6IDE2cHg7XHJcblxyXG4gICAgaW9uLWJ1dHRvbiB7XHJcbiAgICAgIG1hcmdpbjogMDtcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbi5wb3N0LWNhcmQge1xyXG4gIGJhY2tncm91bmQ6IHZhcigtLWlvbi1jYXJkLWJhY2tncm91bmQpO1xyXG4gIGJvcmRlci1yYWRpdXM6IDEycHg7XHJcbiAgbWFyZ2luOiAxNnB4IDA7XHJcbiAgYm94LXNoYWRvdzogMCAycHggNHB4IHJnYmEoMCwgMCwgMCwgMC4xKTtcclxuICBhbmltYXRpb246IGZhZGVJbiAwLjNzIGVhc2Utb3V0O1xyXG5cclxuICAucG9zdC1jb250ZW50IHtcclxuICAgIGNvbG9yOiB2YXIoLS1pb24tdGV4dC1jb2xvcik7XHJcbiAgICBmb250LXNpemU6IDFlbTtcclxuICAgIGxpbmUtaGVpZ2h0OiAxLjU7XHJcbiAgICBtYXJnaW46IDAgMCAxNnB4IDA7XHJcbiAgICB3aGl0ZS1zcGFjZTogcHJlLXdyYXA7XHJcbiAgICB3b3JkLWJyZWFrOiBicmVhay13b3JkO1xyXG4gIH1cclxuXHJcbiAgLnBvc3QtbWV0YWRhdGEge1xyXG4gICAgZm9udC1zaXplOiAwLjllbTtcclxuICAgIG1hcmdpbi1ib3R0b206IDEycHg7XHJcbiAgICBjb2xvcjogdmFyKC0taW9uLWNvbG9yLW1lZGl1bSk7XHJcbiAgfVxyXG5cclxuICAuYWN0aW9uLWJ1dHRvbnMge1xyXG4gICAgZGlzcGxheTogZmxleDtcclxuICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcclxuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbiAgICBib3JkZXItdG9wOiAxcHggc29saWQgcmdiYSh2YXIoLS1pb24tY29sb3ItbWVkaXVtLXJnYiksIDAuMik7XHJcbiAgICBwYWRkaW5nLXRvcDogMTJweDtcclxuICAgIG1hcmdpbi10b3A6IDEycHg7XHJcblxyXG4gICAgaW9uLWJ1dHRvbiB7XHJcbiAgICAgIG1hcmdpbjogMDtcclxuICAgICAgLS1wYWRkaW5nLXN0YXJ0OiA4cHg7XHJcbiAgICAgIC0tcGFkZGluZy1lbmQ6IDhweDtcclxuICAgICAgaGVpZ2h0OiAzNnB4O1xyXG5cclxuICAgICAgaW9uLWljb24ge1xyXG4gICAgICAgIGZvbnQtc2l6ZTogMjBweDtcclxuICAgICAgICBtYXJnaW4tcmlnaHQ6IDRweDtcclxuICAgICAgfVxyXG5cclxuICAgICAgJltjb2xvcj1cInRlcnRpYXJ5XCJdIHtcclxuICAgICAgICAtLWNvbG9yOiB2YXIoLS1pb24tY29sb3ItdGVydGlhcnkpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAmW2NvbG9yPVwicHJpbWFyeVwiXSB7XHJcbiAgICAgICAgLS1jb2xvcjogdmFyKC0taW9uLWNvbG9yLXByaW1hcnkpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG4ubG9hZGluZy1jb250YWluZXIge1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XHJcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxuICBtaW4taGVpZ2h0OiAyMDBweDtcclxuXHJcbiAgaW9uLXNwaW5uZXIge1xyXG4gICAgLS1jb2xvcjogdmFyKC0taW9uLWNvbG9yLXByaW1hcnkpO1xyXG4gICAgd2lkdGg6IDQ4cHg7XHJcbiAgICBoZWlnaHQ6IDQ4cHg7XHJcbiAgfVxyXG59XHJcblxyXG4ubm8tcG9zdHMge1xyXG4gIHRleHQtYWxpZ246IGNlbnRlcjtcclxuICBwYWRkaW5nOiAzMnB4IDE2cHg7XHJcbiAgYmFja2dyb3VuZDogdmFyKC0taW9uLWNhcmQtYmFja2dyb3VuZCk7XHJcbiAgYm9yZGVyLXJhZGl1czogMTJweDtcclxuICBtYXJnaW46IDE2cHggMDtcclxuICBhbmltYXRpb246IGZhZGVJbiAwLjNzIGVhc2Utb3V0O1xyXG5cclxuICBwIHtcclxuICAgIGZvbnQtc2l6ZTogMWVtO1xyXG4gICAgbGluZS1oZWlnaHQ6IDEuNDtcclxuICAgIG1hcmdpbjogMDtcclxuICAgIGNvbG9yOiB2YXIoLS1pb24tY29sb3ItbWVkaXVtKTtcclxuICB9XHJcbn1cclxuXHJcbi8vIEFuaW1hw6fDtWVzXHJcbkBrZXlmcmFtZXMgZmFkZUluIHtcclxuICBmcm9tIHtcclxuICAgIG9wYWNpdHk6IDA7XHJcbiAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoMjBweCk7XHJcbiAgfVxyXG4gIHRvIHtcclxuICAgIG9wYWNpdHk6IDE7XHJcbiAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoMCk7XHJcbiAgfVxyXG59XHJcblxyXG5Aa2V5ZnJhbWVzIHNsaWRlRG93biB7XHJcbiAgZnJvbSB7XHJcbiAgICBvcGFjaXR5OiAwO1xyXG4gICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC0yMHB4KTtcclxuICB9XHJcbiAgdG8ge1xyXG4gICAgb3BhY2l0eTogMTtcclxuICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgwKTtcclxuICB9XHJcbn1cclxuXHJcbi8vIFJlc3BvbnNpdmlkYWRlXHJcbkBtZWRpYSAobWluLXdpZHRoOiA3NjhweCkge1xyXG4gIC5jcmVhdGUtcG9zdCxcclxuICAucG9zdC1jYXJkLFxyXG4gIC5uby1wb3N0cyB7XHJcbiAgICBtYXgtd2lkdGg6IDYwMHB4O1xyXG4gICAgbWFyZ2luLWxlZnQ6IGF1dG87XHJcbiAgICBtYXJnaW4tcmlnaHQ6IGF1dG87XHJcbiAgfVxyXG5cclxuICAuYnV0dG9uLWdyb3VwIHtcclxuICAgIGZsZXgtZGlyZWN0aW9uOiByb3c7XHJcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtZW5kO1xyXG5cclxuICAgIGlvbi1idXR0b24ge1xyXG4gICAgICB3aWR0aDogYXV0bztcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbi8vIERhcmsgbW9kZSBzdXBwb3J0XHJcbkBtZWRpYSAocHJlZmVycy1jb2xvci1zY2hlbWU6IGRhcmspIHtcclxuICAucG9zdC1jYXJkLFxyXG4gIC5jcmVhdGUtcG9zdCBpb24tY2FyZCB7XHJcbiAgICBib3gtc2hhZG93OiAwIDJweCA0cHggcmdiYSgwLCAwLCAwLCAwLjIpO1xyXG4gIH1cclxuXHJcbiAgLmFjdGlvbi1idXR0b25zIHtcclxuICAgIGJvcmRlci10b3AtY29sb3I6IHJnYmEodmFyKC0taW9uLWNvbG9yLW1lZGl1bS1yZ2IpLCAwLjEpO1xyXG4gIH1cclxufVxyXG5cclxuLy8gSW5maW5pdGUgc2Nyb2xsIGN1c3RvbWl6YXRpb25cclxuaW9uLWluZmluaXRlLXNjcm9sbC1jb250ZW50IHtcclxuICBtaW4taGVpZ2h0OiA4MHB4O1xyXG4gIFxyXG4gIGlvbi1zcGlubmVyIHtcclxuICAgIC0tY29sb3I6IHZhcigtLWlvbi1jb2xvci1wcmltYXJ5KTtcclxuICB9XHJcbn1cclxuIl19 */\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvcGFnZXMvZmVlZC9mZWVkLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLHlDQUFBO0FBQ0Y7O0FBRUE7RUFDRSxjQUFBO0VBQ0EsWUFBQTtFQUNBLG9CQUFBO0FBQ0Y7QUFDRTtFQUNFLGlCQUFBO0VBQ0EsZUFBQTtBQUNKOztBQUdBO0VBQ0UsbUJBQUE7RUFDQSxrQ0FBQTtBQUFGO0FBRUU7RUFDRSxzQ0FBQTtFQUNBLFNBQUE7RUFDQSxtQkFBQTtFQUNBLHdDQUFBO0FBQUo7QUFFSTtFQUNFLHlCQUFBO0VBQ0EsMkJBQUE7RUFDQSxrQkFBQTtFQUNBLHNCQUFBO0FBQU47QUFHSTtFQUNFLHlCQUFBO0VBQ0EsOEJBQUE7RUFDQSw0Q0FBQTtFQUNBLGFBQUE7RUFDQSxpQkFBQTtBQUROO0FBS0U7RUFDRSxhQUFBO0VBQ0Esc0JBQUE7RUFDQSxRQUFBO0VBQ0EsZ0JBQUE7QUFISjtBQUtJO0VBQ0UsU0FBQTtBQUhOOztBQVFBO0VBQ0Usc0NBQUE7RUFDQSxtQkFBQTtFQUNBLGNBQUE7RUFDQSx3Q0FBQTtFQUNBLCtCQUFBO0FBTEY7QUFPRTtFQUNFLDRCQUFBO0VBQ0EsY0FBQTtFQUNBLGdCQUFBO0VBQ0Esa0JBQUE7RUFDQSxxQkFBQTtFQUNBLHNCQUFBO0FBTEo7QUFRRTtFQUNFLGdCQUFBO0VBQ0EsbUJBQUE7RUFDQSw4QkFBQTtBQU5KO0FBU0U7RUFDRSxhQUFBO0VBQ0EsOEJBQUE7RUFDQSxtQkFBQTtFQUNBLDREQUFBO0VBQ0EsaUJBQUE7RUFDQSxnQkFBQTtBQVBKO0FBU0k7RUFDRSxTQUFBO0VBQ0Esb0JBQUE7RUFDQSxrQkFBQTtFQUNBLFlBQUE7QUFQTjtBQVNNO0VBQ0UsZUFBQTtFQUNBLGlCQUFBO0FBUFI7QUFVTTtFQUNFLGtDQUFBO0FBUlI7QUFXTTtFQUNFLGlDQUFBO0FBVFI7O0FBZUE7RUFDRSxhQUFBO0VBQ0EsdUJBQUE7RUFDQSxtQkFBQTtFQUNBLGlCQUFBO0FBWkY7QUFjRTtFQUNFLGlDQUFBO0VBQ0EsV0FBQTtFQUNBLFlBQUE7QUFaSjs7QUFnQkE7RUFDRSxrQkFBQTtFQUNBLGtCQUFBO0VBQ0Esc0NBQUE7RUFDQSxtQkFBQTtFQUNBLGNBQUE7RUFDQSwrQkFBQTtBQWJGO0FBZUU7RUFDRSxjQUFBO0VBQ0EsZ0JBQUE7RUFDQSxTQUFBO0VBQ0EsOEJBQUE7QUFiSjs7QUFrQkE7RUFDRTtJQUNFLFVBQUE7SUFDQSwyQkFBQTtFQWZGO0VBaUJBO0lBQ0UsVUFBQTtJQUNBLHdCQUFBO0VBZkY7QUFDRjtBQWtCQTtFQUNFO0lBQ0UsVUFBQTtJQUNBLDRCQUFBO0VBaEJGO0VBa0JBO0lBQ0UsVUFBQTtJQUNBLHdCQUFBO0VBaEJGO0FBQ0Y7QUFvQkE7RUFDRTs7O0lBR0UsZ0JBQUE7SUFDQSxpQkFBQTtJQUNBLGtCQUFBO0VBbEJGO0VBcUJBO0lBQ0UsbUJBQUE7SUFDQSx5QkFBQTtFQW5CRjtFQXFCRTtJQUNFLFdBQUE7RUFuQko7QUFDRjtBQXdCQTtFQUNFOztJQUVFLHdDQUFBO0VBdEJGO0VBeUJBO0lBQ0Usd0RBQUE7RUF2QkY7QUFDRjtBQTJCQTtFQUNFLGdCQUFBO0FBekJGO0FBMkJFO0VBQ0UsaUNBQUE7QUF6Qko7QUFDQSxvck9BQW9yTyIsInNvdXJjZXNDb250ZW50IjpbImlvbi1jb250ZW50IHtcclxuICAtLWJhY2tncm91bmQ6IHZhcigtLWlvbi1iYWNrZ3JvdW5kLWNvbG9yKTtcclxufVxyXG5cclxuLmNyZWF0ZS1wb3N0LWJ1dHRvbiB7XHJcbiAgbWFyZ2luOiAxNnB4IDA7XHJcbiAgaGVpZ2h0OiA0OHB4O1xyXG4gIC0tYm9yZGVyLXJhZGl1czogOHB4O1xyXG4gIFxyXG4gIGlvbi1pY29uIHtcclxuICAgIG1hcmdpbi1yaWdodDogOHB4O1xyXG4gICAgZm9udC1zaXplOiAyMHB4O1xyXG4gIH1cclxufVxyXG5cclxuLmNyZWF0ZS1wb3N0IHtcclxuICBtYXJnaW4tYm90dG9tOiAxNnB4O1xyXG4gIGFuaW1hdGlvbjogc2xpZGVEb3duIDAuM3MgZWFzZS1vdXQ7XHJcblxyXG4gIGlvbi1jYXJkIHtcclxuICAgIGJhY2tncm91bmQ6IHZhcigtLWlvbi1jYXJkLWJhY2tncm91bmQpO1xyXG4gICAgbWFyZ2luOiAwO1xyXG4gICAgYm9yZGVyLXJhZGl1czogMTJweDtcclxuICAgIGJveC1zaGFkb3c6IDAgMnB4IDRweCByZ2JhKDAsIDAsIDAsIDAuMSk7XHJcblxyXG4gICAgaW9uLWl0ZW0ge1xyXG4gICAgICAtLWJhY2tncm91bmQ6IHRyYW5zcGFyZW50O1xyXG4gICAgICAtLWJvcmRlci1jb2xvcjogdHJhbnNwYXJlbnQ7XHJcbiAgICAgIC0tcGFkZGluZy1zdGFydDogMDtcclxuICAgICAgLS1pbm5lci1wYWRkaW5nLWVuZDogMDtcclxuICAgIH1cclxuXHJcbiAgICBpb24tdGV4dGFyZWEge1xyXG4gICAgICAtLWJhY2tncm91bmQ6IHRyYW5zcGFyZW50O1xyXG4gICAgICAtLWNvbG9yOiB2YXIoLS1pb24tdGV4dC1jb2xvcik7XHJcbiAgICAgIC0tcGxhY2Vob2xkZXItY29sb3I6IHZhcigtLWlvbi1jb2xvci1tZWRpdW0pO1xyXG4gICAgICBtYXJnaW46IDhweCAwO1xyXG4gICAgICBtaW4taGVpZ2h0OiAxMDBweDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC5idXR0b24tZ3JvdXAge1xyXG4gICAgZGlzcGxheTogZmxleDtcclxuICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XHJcbiAgICBnYXA6IDhweDtcclxuICAgIG1hcmdpbi10b3A6IDE2cHg7XHJcblxyXG4gICAgaW9uLWJ1dHRvbiB7XHJcbiAgICAgIG1hcmdpbjogMDtcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbi5wb3N0LWNhcmQge1xyXG4gIGJhY2tncm91bmQ6IHZhcigtLWlvbi1jYXJkLWJhY2tncm91bmQpO1xyXG4gIGJvcmRlci1yYWRpdXM6IDEycHg7XHJcbiAgbWFyZ2luOiAxNnB4IDA7XHJcbiAgYm94LXNoYWRvdzogMCAycHggNHB4IHJnYmEoMCwgMCwgMCwgMC4xKTtcclxuICBhbmltYXRpb246IGZhZGVJbiAwLjNzIGVhc2Utb3V0O1xyXG5cclxuICAucG9zdC1jb250ZW50IHtcclxuICAgIGNvbG9yOiB2YXIoLS1pb24tdGV4dC1jb2xvcik7XHJcbiAgICBmb250LXNpemU6IDFlbTtcclxuICAgIGxpbmUtaGVpZ2h0OiAxLjU7XHJcbiAgICBtYXJnaW46IDAgMCAxNnB4IDA7XHJcbiAgICB3aGl0ZS1zcGFjZTogcHJlLXdyYXA7XHJcbiAgICB3b3JkLWJyZWFrOiBicmVhay13b3JkO1xyXG4gIH1cclxuXHJcbiAgLnBvc3QtbWV0YWRhdGEge1xyXG4gICAgZm9udC1zaXplOiAwLjllbTtcclxuICAgIG1hcmdpbi1ib3R0b206IDEycHg7XHJcbiAgICBjb2xvcjogdmFyKC0taW9uLWNvbG9yLW1lZGl1bSk7XHJcbiAgfVxyXG5cclxuICAuYWN0aW9uLWJ1dHRvbnMge1xyXG4gICAgZGlzcGxheTogZmxleDtcclxuICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcclxuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbiAgICBib3JkZXItdG9wOiAxcHggc29saWQgcmdiYSh2YXIoLS1pb24tY29sb3ItbWVkaXVtLXJnYiksIDAuMik7XHJcbiAgICBwYWRkaW5nLXRvcDogMTJweDtcclxuICAgIG1hcmdpbi10b3A6IDEycHg7XHJcblxyXG4gICAgaW9uLWJ1dHRvbiB7XHJcbiAgICAgIG1hcmdpbjogMDtcclxuICAgICAgLS1wYWRkaW5nLXN0YXJ0OiA4cHg7XHJcbiAgICAgIC0tcGFkZGluZy1lbmQ6IDhweDtcclxuICAgICAgaGVpZ2h0OiAzNnB4O1xyXG5cclxuICAgICAgaW9uLWljb24ge1xyXG4gICAgICAgIGZvbnQtc2l6ZTogMjBweDtcclxuICAgICAgICBtYXJnaW4tcmlnaHQ6IDRweDtcclxuICAgICAgfVxyXG5cclxuICAgICAgJltjb2xvcj1cInRlcnRpYXJ5XCJdIHtcclxuICAgICAgICAtLWNvbG9yOiB2YXIoLS1pb24tY29sb3ItdGVydGlhcnkpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAmW2NvbG9yPVwicHJpbWFyeVwiXSB7XHJcbiAgICAgICAgLS1jb2xvcjogdmFyKC0taW9uLWNvbG9yLXByaW1hcnkpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG4ubG9hZGluZy1jb250YWluZXIge1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XHJcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxuICBtaW4taGVpZ2h0OiAyMDBweDtcclxuXHJcbiAgaW9uLXNwaW5uZXIge1xyXG4gICAgLS1jb2xvcjogdmFyKC0taW9uLWNvbG9yLXByaW1hcnkpO1xyXG4gICAgd2lkdGg6IDQ4cHg7XHJcbiAgICBoZWlnaHQ6IDQ4cHg7XHJcbiAgfVxyXG59XHJcblxyXG4ubm8tcG9zdHMge1xyXG4gIHRleHQtYWxpZ246IGNlbnRlcjtcclxuICBwYWRkaW5nOiAzMnB4IDE2cHg7XHJcbiAgYmFja2dyb3VuZDogdmFyKC0taW9uLWNhcmQtYmFja2dyb3VuZCk7XHJcbiAgYm9yZGVyLXJhZGl1czogMTJweDtcclxuICBtYXJnaW46IDE2cHggMDtcclxuICBhbmltYXRpb246IGZhZGVJbiAwLjNzIGVhc2Utb3V0O1xyXG5cclxuICBwIHtcclxuICAgIGZvbnQtc2l6ZTogMWVtO1xyXG4gICAgbGluZS1oZWlnaHQ6IDEuNDtcclxuICAgIG1hcmdpbjogMDtcclxuICAgIGNvbG9yOiB2YXIoLS1pb24tY29sb3ItbWVkaXVtKTtcclxuICB9XHJcbn1cclxuXHJcbi8vIEFuaW1hw4PCp8ODwrVlc1xyXG5Aa2V5ZnJhbWVzIGZhZGVJbiB7XHJcbiAgZnJvbSB7XHJcbiAgICBvcGFjaXR5OiAwO1xyXG4gICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKDIwcHgpO1xyXG4gIH1cclxuICB0byB7XHJcbiAgICBvcGFjaXR5OiAxO1xyXG4gICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKDApO1xyXG4gIH1cclxufVxyXG5cclxuQGtleWZyYW1lcyBzbGlkZURvd24ge1xyXG4gIGZyb20ge1xyXG4gICAgb3BhY2l0eTogMDtcclxuICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtMjBweCk7XHJcbiAgfVxyXG4gIHRvIHtcclxuICAgIG9wYWNpdHk6IDE7XHJcbiAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoMCk7XHJcbiAgfVxyXG59XHJcblxyXG4vLyBSZXNwb25zaXZpZGFkZVxyXG5AbWVkaWEgKG1pbi13aWR0aDogNzY4cHgpIHtcclxuICAuY3JlYXRlLXBvc3QsXHJcbiAgLnBvc3QtY2FyZCxcclxuICAubm8tcG9zdHMge1xyXG4gICAgbWF4LXdpZHRoOiA2MDBweDtcclxuICAgIG1hcmdpbi1sZWZ0OiBhdXRvO1xyXG4gICAgbWFyZ2luLXJpZ2h0OiBhdXRvO1xyXG4gIH1cclxuXHJcbiAgLmJ1dHRvbi1ncm91cCB7XHJcbiAgICBmbGV4LWRpcmVjdGlvbjogcm93O1xyXG4gICAganVzdGlmeS1jb250ZW50OiBmbGV4LWVuZDtcclxuXHJcbiAgICBpb24tYnV0dG9uIHtcclxuICAgICAgd2lkdGg6IGF1dG87XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG4vLyBEYXJrIG1vZGUgc3VwcG9ydFxyXG5AbWVkaWEgKHByZWZlcnMtY29sb3Itc2NoZW1lOiBkYXJrKSB7XHJcbiAgLnBvc3QtY2FyZCxcclxuICAuY3JlYXRlLXBvc3QgaW9uLWNhcmQge1xyXG4gICAgYm94LXNoYWRvdzogMCAycHggNHB4IHJnYmEoMCwgMCwgMCwgMC4yKTtcclxuICB9XHJcblxyXG4gIC5hY3Rpb24tYnV0dG9ucyB7XHJcbiAgICBib3JkZXItdG9wLWNvbG9yOiByZ2JhKHZhcigtLWlvbi1jb2xvci1tZWRpdW0tcmdiKSwgMC4xKTtcclxuICB9XHJcbn1cclxuXHJcbi8vIEluZmluaXRlIHNjcm9sbCBjdXN0b21pemF0aW9uXHJcbmlvbi1pbmZpbml0ZS1zY3JvbGwtY29udGVudCB7XHJcbiAgbWluLWhlaWdodDogODBweDtcclxuICBcclxuICBpb24tc3Bpbm5lciB7XHJcbiAgICAtLWNvbG9yOiB2YXIoLS1pb24tY29sb3ItcHJpbWFyeSk7XHJcbiAgfVxyXG59XHJcbiJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n    });\n  }\n}","map":{"version":3,"mappings":"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","names":["IonicModule","IonInfiniteScroll","CommonModule","FormsModule","HeaderComponent","take","i0","FeedPage","constructor","feedService","authService","uiService","ngOnInit","loadInitialPosts","userSubscription","user$","subscribe","user","currentUser","ngOnDestroy","postsSubscription","unsubscribe","isLoading","posts","getPosts","pageSize","pipe","toPromise","length","lastPostId","id","error","showError","loadMorePosts","event","target","complete","disabled","newPosts","getPostsAfter","showCreatePost","isCreatingPost","createPost","newPostContent","showLoading","showSuccess","hideLoading","onLike","post","stopPropagation","likePost","onDislike","dislikePost","onReport","confirmed","showConfirm","reportPost","cancelPost","hasUserLiked","userLikes","includes","uid","hasUserDisliked","userDislikes","selectors","viewQuery","ctx","styles"],"sourceRoot":"","sources":["C:\\Users\\adrie\\Desktop\\src\\app\\pages\\feed\\feed.page.ts","C:\\Users\\adrie\\Desktop\\src\\app\\pages\\feed\\feed.page.html"],"sourcesContent":["import { Component, OnInit, OnDestroy, ViewChild } from '@angular/core';\r\nimport { IonicModule, IonInfiniteScroll } from '@ionic/angular';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { FeedService, Post } from '../../services/feed.service';\r\nimport { AuthService, User } from '../../services/auth.service';\r\nimport { UiService } from '../../services/ui.service';\r\nimport { HeaderComponent } from '../../components/header/header.component';\r\nimport { Subscription } from 'rxjs';\r\nimport { take } from 'rxjs/operators';\r\nimport { CUSTOM_ELEMENTS_SCHEMA } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-feed',\r\n  templateUrl: './feed.page.html',\r\n  styleUrls: ['./feed.page.scss'],\r\n  standalone: true,\r\n  imports: [IonicModule, CommonModule, FormsModule, HeaderComponent],\r\n  schemas: [CUSTOM_ELEMENTS_SCHEMA]\r\n})\r\nexport class FeedPage implements OnInit, OnDestroy {\r\n  @ViewChild(IonInfiniteScroll) infiniteScroll!: IonInfiniteScroll;\r\n\r\n  posts: Post[] = [];\r\n  currentUser: User | null = null;\r\n  newPostContent: string = '';\r\n  isCreatingPost: boolean = false;\r\n  isLoading: boolean = true;\r\n  private postsSubscription?: Subscription;\r\n  private userSubscription?: Subscription;\r\n  private pageSize: number = 10;\r\n  private lastPostId?: string;\r\n\r\n  constructor(\r\n    private feedService: FeedService,\r\n    private authService: AuthService,\r\n    private uiService: UiService\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    this.loadInitialPosts();\r\n    this.userSubscription = this.authService.user$.subscribe(user => {\r\n      this.currentUser = user;\r\n    });\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    if (this.postsSubscription) {\r\n      this.postsSubscription.unsubscribe();\r\n    }\r\n    if (this.userSubscription) {\r\n      this.userSubscription.unsubscribe();\r\n    }\r\n  }\r\n\r\n  private async loadInitialPosts() {\r\n    try {\r\n      this.isLoading = true;\r\n      const posts = await this.feedService.getPosts(this.pageSize)\r\n        .pipe(take(1))\r\n        .toPromise();\r\n      \r\n      this.posts = posts || [];\r\n      if (this.posts.length > 0) {\r\n        this.lastPostId = this.posts[this.posts.length - 1].id;\r\n      }\r\n    } catch (error) {\r\n      await this.uiService.showError('Failed to load posts');\r\n    } finally {\r\n      this.isLoading = false;\r\n    }\r\n  }\r\n\r\n  async loadMorePosts(event: any) {\r\n    if (!this.lastPostId) {\r\n      event.target.complete();\r\n      event.target.disabled = true;\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const newPosts = await this.feedService.getPostsAfter(this.lastPostId, this.pageSize)\r\n        .pipe(take(1))\r\n        .toPromise();\r\n      \r\n      if (newPosts && newPosts.length > 0) {\r\n        this.posts = [...this.posts, ...newPosts];\r\n        this.lastPostId = newPosts[newPosts.length - 1].id;\r\n      } else {\r\n        event.target.disabled = true;\r\n      }\r\n    } catch (error) {\r\n      await this.uiService.showError('Failed to load more posts');\r\n    } finally {\r\n      event.target.complete();\r\n    }\r\n  }\r\n\r\n  showCreatePost() {\r\n    this.isCreatingPost = true;\r\n  }\r\n\r\n  async createPost() {\r\n    if (!this.newPostContent || this.newPostContent.length > 400) {\r\n      return;\r\n    }\r\n\r\n    try {\r\n      await this.uiService.showLoading('Creating post...');\r\n      await this.feedService.createPost(this.newPostContent);\r\n      this.newPostContent = '';\r\n      this.isCreatingPost = false;\r\n      await this.uiService.showSuccess('Post created successfully');\r\n      await this.loadInitialPosts();\r\n    } catch (error) {\r\n      await this.uiService.showError('Failed to create post');\r\n    } finally {\r\n      await this.uiService.hideLoading();\r\n    }\r\n  }\r\n\r\n  async onLike(post: Post, event?: Event) {\r\n    if (event) {\r\n      event.stopPropagation();\r\n    }\r\n\r\n    if (!post.id) return;\r\n\r\n    try {\r\n      await this.feedService.likePost(post.id);\r\n    } catch (error) {\r\n      await this.uiService.showError('Failed to like post');\r\n    }\r\n  }\r\n\r\n  async onDislike(post: Post, event?: Event) {\r\n    if (event) {\r\n      event.stopPropagation();\r\n    }\r\n\r\n    if (!post.id) return;\r\n\r\n    try {\r\n      await this.feedService.dislikePost(post.id);\r\n    } catch (error) {\r\n      await this.uiService.showError('Failed to dislike post');\r\n    }\r\n  }\r\n\r\n  async onReport(post: Post, event?: Event) {\r\n    if (event) {\r\n      event.stopPropagation();\r\n    }\r\n\r\n    if (!post.id) return;\r\n\r\n    const confirmed = await this.uiService.showConfirm(\r\n      'Report Post',\r\n      'Are you sure you want to report this post?'\r\n    );\r\n\r\n    if (confirmed) {\r\n      try {\r\n        await this.feedService.reportPost(post.id);\r\n        await this.uiService.showSuccess('Post reported successfully');\r\n      } catch (error) {\r\n        await this.uiService.showError('Failed to report post');\r\n      }\r\n    }\r\n  }\r\n\r\n  cancelPost() {\r\n    this.newPostContent = '';\r\n    this.isCreatingPost = false;\r\n  }\r\n\r\n  hasUserLiked(post: Post): boolean {\r\n    return this.currentUser ? (post.userLikes || []).includes(this.currentUser.uid) : false;\r\n  }\r\n\r\n  hasUserDisliked(post: Post): boolean {\r\n    return this.currentUser ? (post.userDislikes || []).includes(this.currentUser.uid) : false;\r\n  }\r\n}\r\n","<ion-header>\r\n  <app-header title=\"Feed\"></app-header>\r\n</ion-header>\r\n\r\n<ion-content>\r\n  <ion-button \r\n    *ngIf=\"!isCreatingPost\"\r\n    expand=\"block\" \r\n    class=\"create-post-button\" \r\n    (click)=\"showCreatePost()\">\r\n    <ion-icon name=\"create-outline\"></ion-icon>\r\n    Create Post\r\n  </ion-button>\r\n\r\n  <div class=\"create-post\" *ngIf=\"isCreatingPost\">\r\n    <ion-card>\r\n      <ion-card-content>\r\n        <ion-item lines=\"none\">\r\n          <ion-textarea\r\n            [(ngModel)]=\"newPostContent\"\r\n            placeholder=\"What's on your mind?\"\r\n            [maxlength]=\"400\"\r\n            [autoGrow]=\"true\"\r\n            rows=\"4\">\r\n          </ion-textarea>\r\n        </ion-item>\r\n        <div class=\"button-group\">\r\n          <ion-button fill=\"clear\" (click)=\"cancelPost()\">Cancel</ion-button>\r\n          <ion-button \r\n            [disabled]=\"!newPostContent || newPostContent.length > 400\"\r\n            (click)=\"createPost()\">\r\n            Post\r\n          </ion-button>\r\n        </div>\r\n      </ion-card-content>\r\n    </ion-card>\r\n  </div>\r\n\r\n  <div class=\"loading-container\" *ngIf=\"isLoading\">\r\n    <ion-spinner></ion-spinner>\r\n  </div>\r\n\r\n  <div class=\"no-posts\" *ngIf=\"!isLoading && posts.length === 0\">\r\n    <p>No posts yet. Be the first to share something!</p>\r\n  </div>\r\n\r\n  <ion-card class=\"post-card\" *ngFor=\"let post of posts\">\r\n    <ion-card-content>\r\n      <div class=\"post-metadata\">\r\n        <ion-text color=\"medium\">\r\n          {{ post.createdAt?.toDate() | date:'medium' }}\r\n        </ion-text>\r\n      </div>\r\n      <div class=\"post-content\">\r\n        {{ post.content }}\r\n      </div>\r\n      <div class=\"action-buttons\">\r\n        <ion-button \r\n          fill=\"clear\" \r\n          [color]=\"hasUserLiked(post) ? 'primary' : 'medium'\"\r\n          (click)=\"onLike(post, $event)\">\r\n          <ion-icon name=\"thumbs-up-outline\"></ion-icon>\r\n          {{ post.likes || 0 }}\r\n        </ion-button>\r\n        <ion-button \r\n          fill=\"clear\" \r\n          [color]=\"hasUserDisliked(post) ? 'primary' : 'medium'\"\r\n          (click)=\"onDislike(post, $event)\">\r\n          <ion-icon name=\"thumbs-down-outline\"></ion-icon>\r\n          {{ post.dislikes || 0 }}\r\n        </ion-button>\r\n        <ion-button \r\n          fill=\"clear\" \r\n          color=\"medium\"\r\n          (click)=\"onReport(post, $event)\">\r\n          <ion-icon name=\"flag-outline\"></ion-icon>\r\n          Report\r\n        </ion-button>\r\n      </div>\r\n    </ion-card-content>\r\n  </ion-card>\r\n\r\n  <ion-infinite-scroll (ionInfinite)=\"loadMorePosts($event)\">\r\n    <ion-infinite-scroll-content\r\n      loadingSpinner=\"bubbles\"\r\n      loadingText=\"Loading more posts...\">\r\n    </ion-infinite-scroll-content>\r\n  </ion-infinite-scroll>\r\n</ion-content>\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}